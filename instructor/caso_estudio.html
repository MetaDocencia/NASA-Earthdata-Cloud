<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Introducción al uso de datos NASA Earthdata cloud: Caso de Estudio</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/metadocencia/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/metadocencia/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/metadocencia/favicon-16x16.png"><link rel="manifest" href="../favicons/metadocencia/site.webmanifest"><link rel="mask-icon" href="../favicons/metadocencia/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav metadocencia"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="metadocencia-logo" alt="MetaDocencia" src="../assets/images/metadocencia-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../caso_estudio.html';">Vista de estudiante</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav metadocencia" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="MetaDocencia" src="../assets/images/metadocencia-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Introducción al uso de datos NASA Earthdata cloud
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Introducción al uso de datos NASA Earthdata cloud
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Notas de la instructora</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extraer todas las imágenes</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Referencia</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introducción al uso de datos NASA Earthdata cloud
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 81%" class="percentage">
    81%
  </div>
  <div class="progress metadocencia">
    <div class="progress-bar metadocencia" role="progressbar" style="width: 81%" aria-valuenow="81" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../caso_estudio.html">Vista de estudiante</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y agenda</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="fundamentos.html">1. Fundamentos de teledetección</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="sistemas_de_coordenadas.html">2. Sistemas de coordenadas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="datos_geoespaciales.html">3. Modelos de datos geoespaciales</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="OPERA_products.html">4. NASA Earthdata Cloud y productos OPERA</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Caso de Estudio
        </span>
      
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="diapositivas.html">6. Diapositivas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Notas de la instructora</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extraer todas las imágenes</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Referencia</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Capítulo previo y siguiente"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/OPERA_products.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="../instructor/diapositivas.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/OPERA_products.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: NASA Earthdata Cloud
        </a>
        <a class="chapter-link float-end" href="../instructor/diapositivas.html" rel="next">
          Siguiente: Diapositivas...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Caso de Estudio</h1>
        <p>Última actualización: 2025-08-12 |

        <a href="https://metadocencia.github.io/NASA-Earthdata-Cloud/edit/main/episodes/caso_estudio.md" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 20 minutos</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul><li>¿Qué proporción del área de estudio presenta disturbios recientes en
la cobertura vegetal según los datos VEG_DIST_STATUS filtrados por baja
nubosidad?</li>
<li>¿Cómo ha evolucionado la extensión de los disturbios a lo largo del
período analizado en Buriticupu?</li>
<li>¿En qué zonas y fechas específicas se detectaron los disturbios más
intensos (≥50% de cambio en la cobertura vegetal)?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul><li>Procesar y filtrar los productos OPERA DIST-ALERT para extraer
información relevante del área de estudio en Maranhão.</li>
<li>Visualizar y analizar los cambios en la cobertura vegetal a lo largo
del tiempo, identificando patrones de disturbio recientes.</li>
<li>Elaborar mapas y gráficos que sinteticen la información geoespacial,
facilitando la interpretación y comunicación de los resultados para la
toma de decisiones en conservación.</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="deforestación-en-maranhão">Deforestación en Maranhão<a class="anchor" aria-label="anchor" href="#deforestaci%C3%B3n-en-maranh%C3%A3o"></a></h1>
<p>La Amazonía es una de las regiones más biodiversas del planeta y un
componente clave del sistema climático global que además sostiene
múltiples comunidades indígenas. En particular el estado de Maranhão, en
Brasil, es uno de los focos más críticos de deforestación en el país. Se
estima que el 76 % de la cobertura original de bosque amazónico en este
estado ha sido destruida. Según Global Forest Watch, Maranhão ha
registrado una de las tasas más altas de pérdida de cobertura boscosa en
Brasil en los últimos años, impulsada por incendios, expansión
agropecuaria y tala ilegal. Estos procesos están estrechamente ligados a
la fragmentación ecológica, la pérdida de biodiversidad y la violencia
hacia comunidades indígenas. Frente a este escenario, el monitoreo
sistemático de los cambios en la cobertura vegetal es fundamental. Los
productos OPERA DIST-HLS, derivados principalmente de Landsat
(NASA/USGS) y Sentinel-2 (ESA), ofrecen una herramienta poderosa para
detectar disturbios recientes y aportar evidencia clave para la
conservación y la formulación de políticas públicas basadas en
datos.</p>
<figure style="text-align: center;"><img src="https://tse3.mm.bing.net/th/id/OIP.sSfdF5nBFUWbh3UImdbyVgHaE7?pid=Api" alt="Buriticupu - erosión" style="max-width: 100%; height: auto;" class="figure"><figcaption style="font-size: 0.9em; color: #555;">
Foto: AFP / El País (2023)
</figcaption></figure><div class="section level2">
<h2 id="ruta-de-trabajo">Ruta de trabajo<a class="anchor" aria-label="anchor" href="#ruta-de-trabajo"></a></h2>
<p>Nuestro objetivo es evaluar la deforestación en un area cercana a la
ciudad de Buriticupu en el estado Maranhao. Para eso en esta notebook
vamos a :</p>
<ol style="list-style-type: decimal"><li>Filtrar y seleccionar los productos OPERA DIST-ALERT desde la
nube</li>
<li>Visualizar y explorar los subproductos VEG_DIST_STATUS</li>
<li>Gráficar la evolución del disturbio a lo largo del tiempo.</li>
<li>Generar un mapa de disturbios</li>
<li>Explorar subproducto VEG_DIST_DATE</li>
</ol><div class="section level3">
<h3 id="antes-de-empezar---importar-librerías-que-vamos-a-utilizar">Antes de empezar - Importar librerías que vamos a utilizar<a class="anchor" aria-label="anchor" href="#antes-de-empezar---importar-librer%C3%ADas-que-vamos-a-utilizar"></a></h3>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#librerias para manipulación de datos</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">from</span> warnings <span class="im">import</span> filterwarnings <span class="co">#suprime los warning</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np, pandas <span class="im">as</span> pd, xarray <span class="im">as</span> xr</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="im">import</span> rioxarray <span class="im">as</span> rio</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">#librerias para visualización</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="im">import</span> hvplot.pandas, hvplot.xarray</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="im">import</span> geoviews <span class="im">as</span> gv</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="im">from</span> geoviews <span class="im">import</span> opts</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>gv.extension(<span class="st">'bokeh'</span>)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co">#configuración de acceso a datos geoespaciales desde la nube</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="im">from</span> pystac_client <span class="im">import</span> Client</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="im">from</span> osgeo <span class="im">import</span> gdal</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>gdal.SetConfigOption(<span class="st">'GDAL_HTTP_COOKIEFILE'</span>,<span class="st">'~/.cookies.txt'</span>)</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>gdal.SetConfigOption(<span class="st">'GDAL_HTTP_COOKIEJAR'</span>, <span class="st">'~/.cookies.txt'</span>)</span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>gdal.SetConfigOption(<span class="st">'GDAL_DISABLE_READDIR_ON_OPEN'</span>,<span class="st">'EMPTY_DIR'</span>)</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>gdal.SetConfigOption(<span class="st">'CPL_VSIL_CURL_ALLOWED_EXTENSIONS'</span>,<span class="st">'TIF, TIFF'</span>)</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="filtrar-y-seleccionar-los-productos-opera-desde-la-nube">FILTRAR Y SELECCIONAR LOS PRODUCTOS OPERA DESDE LA NUBE<a class="anchor" aria-label="anchor" href="#filtrar-y-seleccionar-los-productos-opera-desde-la-nube"></a></h3>
<div class="section level4">
<h4 id="a--seleccionar-el-area-de-estudio"><strong>1.a. Seleccionar el area de estudio</strong><a class="anchor" aria-label="anchor" href="#a--seleccionar-el-area-de-estudio"></a></h4>
<p>Usa la herramienta <a href="https://boundingbox.klokantech.com/" class="external-link">Bounding Box</a> para obtener
las coordenadas geográficas (latitud y longitud) del área
seleccionada.</p>
<p>Bounding Box es un selector visual de cajas geográficas (bounding
boxes) que permite:</p>
<ul><li>Dibujar un rectángulo o polígono directamente sobre un mapa
interactivo para delimitar un área específica-</li>
<li>Obtener las coordenadas geográficas (latitud y longitud) del área
seleccionada y copiarlas fácilmente en diversos formatos útiles como
MARC, DublinCore, KML, GeoJSON, OGC WKT, CSV, FGDC, entre otros.</li>
</ul><p>Sigue los siguientes pasos:</p>
<ol style="list-style-type: decimal"><li>Navega hasta la página <a href="https://boundingbox.klokantech.com/" class="external-link uri">https://boundingbox.klokantech.com/</a>
</li>
<li>Busca la zona de interés y dibuja un rectángulo sobre el mapa.</li>
<li>En la sección “Copy &amp; Paste”, selecciona el formato “CSV”.</li>
<li>Copia las coordenadas</li>
</ol><p>Estas coordenadas están en el orden correcto requerido por STAC:</p>
<p><code>bbox = [xmin, ymin, xmax, ymax] = [long_oeste, lat_sur, long_este, lat_norte]</code></p>
<p>El siguiente ejemplo supone que las coordenadas copiadas de
boundingbox son
<strong>-46.52993,-4.383815,-43.363075,-4.243793</strong></p>
<ol start="5" style="list-style-type: decimal"><li>Define el area utilizando las coordenadas copiadas y define el rango
de fechas de interés.</li>
</ol><div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#Definir el AOI con las coordenadas </span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>AOI <span class="op">=</span> [<span class="op">-</span><span class="fl">46.52993</span>,<span class="op">-</span><span class="fl">4.383815</span>,<span class="op">-</span><span class="fl">46.363075</span>,<span class="op">-</span><span class="fl">4.243793</span>]</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>rango_fechas <span class="op">=</span> <span class="st">"2022-01-01/2024-03-31"</span></span></code></pre>
</div>
<hr></div>
<div class="section level4">
<h4 id="b--explorar-y-buscar-los-productos-opera-dist-alert"><strong>1.b. Explorar y buscar los productos OPERA
DIST-ALERT</strong><a class="anchor" aria-label="anchor" href="#b--explorar-y-buscar-los-productos-opera-dist-alert"></a></h4>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Realizamos la búsqueda de productos OPERA DIST-</span><span class="al">ALERT</span><span class="co"> para ver fechas disponibles</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="im">from</span> pystac_client <span class="im">import</span> Client</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co"># Retomamos los parámetros de búsqueda definidos en el punto anterior</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>search_params <span class="op">=</span> {</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    <span class="st">"bbox"</span>: AOI,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    <span class="st">"datetime"</span>: rango_fechas,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="st">"collections"</span>: [<span class="st">"OPERA_L3_DIST-ALERT-HLS_V1_1"</span>]</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>}</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>client <span class="op">=</span> Client.<span class="bu">open</span>(<span class="st">"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/"</span>)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>items <span class="op">=</span> <span class="bu">list</span>(client.search(<span class="op">**</span>search_params).get_items())</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co"># Extraemos fechas disponibles</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>fechas <span class="op">=</span> <span class="bu">sorted</span>({item.datetime.date() <span class="cf">for</span> item <span class="kw">in</span> items})</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Fechas disponibles (</span><span class="sc">{</span><span class="bu">len</span>(fechas)<span class="sc">}</span><span class="ss">):"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="bu">print</span>(fechas)</span></code></pre>
</div>
<p>Fechas disponibles (109):</p>
<p>[datetime.date(2023, 1, 2), datetime.date(2023, 1, 5),
datetime.date(2023, 1, 7), datetime.date(2023, 1, 12),
datetime.date(2023, 1, 13), datetime.date(2023, 1, 17),
datetime.date(2023, 1, 21), datetime.date(2023, 1, 22),
datetime.date(2023, 1, 27), datetime.date(2023, 2, 1),
datetime.date(2023, 2, 6), datetime.date(2023, 2, 11),
datetime.date(2023, 2, 14), datetime.date(2023, 2, 16),
datetime.date(2023, 2, 21), datetime.date(2023, 2, 26),
datetime.date(2023, 3, 3), datetime.date(2023, 3, 8),
datetime.date(2023, 3, 10), datetime.date(2023, 3, 18),
datetime.date(2023, 3, 23), datetime.date(2023, 3, 26),
datetime.date(2023, 3, 28), datetime.date(2023, 4, 2),
datetime.date(2023, 4, 3), datetime.date(2023, 4, 7),
datetime.date(2023, 4, 12), datetime.date(2023, 4, 17),
datetime.date(2023, 4, 22), datetime.date(2023, 4, 27),
datetime.date(2023, 5, 2), datetime.date(2023, 5, 5),
datetime.date(2023, 5, 12), datetime.date(2023, 5, 17),
datetime.date(2023, 5, 21), datetime.date(2023, 5, 22),
datetime.date(2023, 5, 27), datetime.date(2023, 5, 29),
datetime.date(2023, 6, 1), datetime.date(2023, 6, 6),
datetime.date(2023, 6, 11), datetime.date(2023, 6, 14),
datetime.date(2023, 6, 16), datetime.date(2023, 6, 21),
datetime.date(2023, 6, 22), datetime.date(2023, 6, 26),
datetime.date(2023, 6, 30), datetime.date(2023, 7, 1),
datetime.date(2023, 7, 6), datetime.date(2023, 7, 8),
datetime.date(2023, 7, 11), datetime.date(2023, 7, 16),
datetime.date(2023, 7, 21), datetime.date(2023, 7, 24),
datetime.date(2023, 7, 26), datetime.date(2023, 7, 31),
datetime.date(2023, 8, 1), datetime.date(2023, 8, 5),
datetime.date(2023, 8, 10), datetime.date(2023, 8, 15),
datetime.date(2023, 8, 20), datetime.date(2023, 8, 25),
datetime.date(2023, 8, 30), datetime.date(2023, 9, 2),
datetime.date(2023, 9, 4), datetime.date(2023, 9, 9),
datetime.date(2023, 9, 10), datetime.date(2023, 9, 14),
datetime.date(2023, 9, 18), datetime.date(2023, 9, 19),
datetime.date(2023, 9, 24), datetime.date(2023, 9, 26),
datetime.date(2023, 9, 29), datetime.date(2023, 10, 4),
datetime.date(2023, 10, 9), datetime.date(2023, 10, 12),
datetime.date(2023, 10, 14), datetime.date(2023, 10, 19),
datetime.date(2023, 10, 20), datetime.date(2023, 10, 28),
datetime.date(2023, 11, 5), datetime.date(2023, 11, 13),
datetime.date(2023, 11, 18), datetime.date(2023, 11, 21),
datetime.date(2023, 11, 28), datetime.date(2023, 12, 8),
datetime.date(2023, 12, 13), datetime.date(2023, 12, 18),
datetime.date(2023, 12, 23), datetime.date(2023, 12, 28),
datetime.date(2024, 1, 7), datetime.date(2024, 1, 8),
datetime.date(2024, 1, 16), datetime.date(2024, 1, 17),
datetime.date(2024, 1, 22), datetime.date(2024, 1, 27),
datetime.date(2024, 2, 1), datetime.date(2024, 2, 6),
datetime.date(2024, 2, 11), datetime.date(2024, 2, 16),
datetime.date(2024, 2, 17), datetime.date(2024, 2, 21),
datetime.date(2024, 2, 25), datetime.date(2024, 2, 26),
datetime.date(2024, 3, 2), datetime.date(2024, 3, 12),
datetime.date(2024, 3, 17), datetime.date(2024, 3, 27),
datetime.date(2024, 3, 28)]</p>
<p><strong>Cada item OPERA DIST-ALERT incluye varios assets
<code>.tif</code>, y cada uno representa una capa de información
distinta:</strong></p>
<ul><li>
<strong>VEG-DIST-STATUS.tif</strong>: detección de disturbio</li>
<li>
<strong>VEG-DIST-CONF.tif</strong>: nivel de confianza de la
detección</li>
<li>
<strong>VEG-DIST-DATE.tif</strong>: fecha en que se detectó el
disturbio</li>
<li>
<strong>VEG-ANOM.tif</strong>: anomalía de la vegetación</li>
<li>
<strong>VEG-IND.tif</strong>: índice de vegetación</li>
<li>
<strong>VEG-LAST-DATE.tif</strong>: última fecha sin disturbio
detectado</li>
<li>
<strong>VEG-DIST-DUR.tif</strong>: duración acumulada del
disturbio</li>
<li>
<strong>VEG-DIST-COUNT.tif</strong>: número de disturbios
detectados</li>
</ul><div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#Imprimimos los archivos que se encuentran dentro de 1 item</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>item <span class="op">=</span> items[<span class="dv">0</span>]  </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Item - Fecha: </span><span class="sc">{</span>item<span class="sc">.</span>datetime<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="cf">for</span> asset_key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Asset: </span><span class="sc">{</span>asset_key<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>asset<span class="sc">.</span>href<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    </span></code></pre>
</div>
<p>Item - Fecha: 2023-01-02</p>
<p>Asset: browse → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.png" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.png</a></p>
<p>Asset: thumbnail_0 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.png" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.png</a></p>
<p>Asset: thumbnail_1 →
s3://lp-prod-public/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.png</p>
<p>Asset:
gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS
→ <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>Asset:
gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-IND
→ <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-IND.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-IND.tif</a></p>
<p>..</p>
<p>Asset:
s3_s3://lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_DATA-MASK
→
s3://lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_DATA-MASK.tif</p>
<p>Asset: metadata → <a href="https://cmr.earthdata.nasa.gov/search/concepts/G2865237949-LPCLOUD.xml" class="external-link uri">https://cmr.earthdata.nasa.gov/search/concepts/G2865237949-LPCLOUD.xml</a></p>
<p>Output is truncated. View as a scrollable element or open in a text
editor. Adjust cell output settings…</p>
<hr></div>
<div class="section level4">
<h4 id="c-filtramos-los-asset-veg_dist-status-con-baja-nubosidad"><strong>1.c Filtramos los asset VEG_DIST-STATUS con baja
nubosidad</strong><a class="anchor" aria-label="anchor" href="#c-filtramos-los-asset-veg_dist-status-con-baja-nubosidad"></a></h4>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># Recorremos todos los productos encontrados y seleccionamos solo los archivos .tif</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># correspondientes al asset 'VEG-DIST-STATUS'</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># Guardamos la fecha del producto y el link al archivo </span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>veg_status_assets <span class="op">=</span> []</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    <span class="cf">for</span> key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">"VEG-DIST-STATUS"</span> <span class="kw">in</span> key <span class="kw">and</span> asset.href.endswith(<span class="st">".tif"</span>):</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>            veg_status_assets.append({</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>                <span class="st">"fecha"</span>: item.datetime.date(),</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>                <span class="st">"url"</span>: asset.href</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>            })</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Se encontraron </span><span class="sc">{</span><span class="bu">len</span>(veg_status_assets)<span class="sc">}</span><span class="ss"> archivos VEG-DIST-STATUS."</span>)</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#imprimimos los primeros 10</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="cf">for</span> registro <span class="kw">in</span> veg_status_assets[:<span class="dv">10</span>]:</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>registro[<span class="st">'fecha'</span>]<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>registro[<span class="st">'url'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>    </span></code></pre>
</div>
<p>Se encontraron 234 archivos VEG-DIST-STATUS.</p>
<p>2023-01-02 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>2023-01-02 →
s3://lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230102T133149Z_20231221T081031Z_S2B_30_v1_VEG-DIST-STATUS.tif</p>
<p>2023-01-05 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>2023-01-05 →
s3://lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230105T131743Z_20231221T081050Z_L8_30_v1_VEG-DIST-STATUS.tif</p>
<p>2023-01-07 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230107T133151Z_20231221T081127Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230107T133151Z_20231221T081127Z_S2A_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230107T133151Z_20231221T081127Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230107T133151Z_20231221T081127Z_S2A_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>…</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># Imprimimos cloud_cover de los items con asset VEG-DIST-STATUS</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">any</span>(<span class="st">"VEG-DIST-STATUS"</span> <span class="kw">in</span> k <span class="cf">for</span> k <span class="kw">in</span> item.assets):</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>item<span class="sc">.</span>datetime<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> → Cloud cover: </span><span class="sc">{</span>item<span class="sc">.</span>properties<span class="sc">.</span>get(<span class="st">'eo:cloud_cover'</span>, <span class="st">'No disponible'</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre>
</div>
<p>2023-01-02 → Cloud cover: 81</p>
<p>2023-01-05 → Cloud cover: 79</p>
<p>2023-01-07 → Cloud cover: 99</p>
<p>2023-01-12 → Cloud cover: 80</p>
<p>2023-01-13 → Cloud cover: 90</p>
<p>2023-01-17 → Cloud cover: 81</p>
<p>…</p>
<p>2024-03-12 → Cloud cover: 92</p>
<p>2024-03-17 → Cloud cover: 99</p>
<p>2024-03-27 → Cloud cover: 72</p>
<p>2024-03-28 → Cloud cover: 89</p>
<p>Output is truncated. View as a scrollable element or open in a text
editor. Adjust cell output settings…</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>filtrados <span class="op">=</span> []</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    cloud <span class="op">=</span> item.properties.get(<span class="st">'eo:cloud_cover'</span>, <span class="va">None</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="cf">if</span> cloud <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span> <span class="kw">and</span> cloud <span class="op">&lt;</span> <span class="dv">40</span>:</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>        <span class="cf">for</span> key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>            <span class="cf">if</span> (</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>                <span class="st">"VEG-DIST-STATUS"</span> <span class="kw">in</span> key <span class="kw">and</span> </span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>                asset.href.endswith(<span class="st">".tif"</span>) <span class="kw">and</span> </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>                asset.href.startswith(<span class="st">"https"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>            ):</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>                filtrados.append({</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>                    <span class="st">"fecha"</span>: item.datetime.date(),</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>                    <span class="st">"url"</span>: asset.href,</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>                    <span class="st">"nubes"</span>: cloud</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>                })</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Se encontraron </span><span class="sc">{</span><span class="bu">len</span>(filtrados)<span class="sc">}</span><span class="ss"> archivos con menos de 40% de nubes."</span>)</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="cf">for</span> registro <span class="kw">in</span> filtrados[:<span class="dv">10</span>]:</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>registro[<span class="st">'fecha'</span>]<span class="sc">}</span><span class="ss"> → Cloud cover: </span><span class="sc">{</span>registro[<span class="st">'nubes'</span>]<span class="sc">}</span><span class="ss"> → </span><span class="sc">{</span>registro[<span class="st">'url'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>    </span></code></pre>
</div>
<p>Se encontraron 12 archivos con menos de 40% de nubes.</p>
<p>2023-06-26 → Cloud cover: 9 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>2023-07-06 → Cloud cover: 0 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230706T133151Z_20231221T083820Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230706T133151Z_20231221T083820Z_S2A_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230706T133151Z_20231221T083820Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230706T133151Z_20231221T083820Z_S2A_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>2023-07-21 → Cloud cover: 0 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230721T133149Z_20231221T084137Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230721T133149Z_20231221T084137Z_S2B_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230721T133149Z_20231221T084137Z_S2B_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230721T133149Z_20231221T084137Z_S2B_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>2023-07-24 → Cloud cover: 26 → <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230724T131653Z_20231221T084202Z_L9_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230724T131653Z_20231221T084202Z_L9_30_v1_VEG-DIST-STATUS.tif" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230724T131653Z_20231221T084202Z_L9_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230724T131653Z_20231221T084202Z_L9_30_v1_VEG-DIST-STATUS.tif</a></p>
<p>…</p>
</div>
</div>
<div class="section level3">
<h3 id="visualizar-y-explorar-productos-veg_dist_status">VISUALIZAR Y EXPLORAR Productos VEG_DIST_STATUS<a class="anchor" aria-label="anchor" href="#visualizar-y-explorar-productos-veg_dist_status"></a></h3>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#Visualizar productos VEG_DIST_STATUS en el area de interes.</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#convertir a shp las coordenadas del area de interes (AOI)</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> box</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co"># AOI definido como bounding box</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>aoi_coords <span class="op">=</span> [<span class="op">-</span><span class="fl">46.78</span>, <span class="op">-</span><span class="fl">4.61</span>, <span class="op">-</span><span class="fl">46.58</span>, <span class="op">-</span><span class="fl">4.41</span>]  <span class="co"># xmin, ymin, xmax, ymax</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>aoi_geom <span class="op">=</span> box(<span class="op">*</span>aoi_coords)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>AOI <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>[aoi_geom], crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#Visualizar la primer y ultima fecha del los productos filtrados</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> mcolors</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="im">import</span> rioxarray</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="co"># Crear colormap personalizado</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>white_to_red <span class="op">=</span> mcolors.LinearSegmentedColormap.from_list(<span class="st">"white_to_red"</span>, [<span class="st">"white"</span>, <span class="st">"red"</span>])</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="co"># URLs de los dos productos</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>urls <span class="op">=</span> [</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>    (<span class="st">"26/06/2023"</span>, <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1_VEG-DIST-STATUS.tif"</span>),</span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a>    (<span class="st">"18/09/2023"</span>, <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1_VEG-DIST-STATUS.tif"</span>)</span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>]</span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a><span class="co"># Crear figura</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), constrained_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a><span class="cf">for</span> ax, (label, url) <span class="kw">in</span> <span class="bu">zip</span>(axes, urls):</span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a>    da <span class="op">=</span> rioxarray.open_rasterio(url, masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a>    <span class="co"># Reproyectar AOI al CRS del raster</span></span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a>    aoi_proj <span class="op">=</span> AOI.to_crs(da.rio.crs)</span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a>    <span class="co"># Recorte</span></span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a>    da_clip <span class="op">=</span> da.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a>    <span class="co"># Plot</span></span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a>    img <span class="op">=</span> da_clip.plot(</span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a>        ax<span class="op">=</span>ax,</span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a>        cmap<span class="op">=</span>white_to_red,</span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a>        vmin<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb8-42"><a href="#cb8-42" tabindex="-1"></a>        vmax<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb8-43"><a href="#cb8-43" tabindex="-1"></a>        add_colorbar<span class="op">=</span><span class="va">False</span></span>
<span id="cb8-44"><a href="#cb8-44" tabindex="-1"></a>    )</span>
<span id="cb8-45"><a href="#cb8-45" tabindex="-1"></a>    aoi_proj.boundary.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb8-46"><a href="#cb8-46" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Disturbios detectados</span><span class="ch">\n</span><span class="sc">{</span>label<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb8-47"><a href="#cb8-47" tabindex="-1"></a>    ax.axis(<span class="st">"off"</span>)</span>
<span id="cb8-48"><a href="#cb8-48" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" tabindex="-1"></a><span class="co"># Agregar colorbar común</span></span>
<span id="cb8-50"><a href="#cb8-50" tabindex="-1"></a>cbar <span class="op">=</span> fig.colorbar(img, ax<span class="op">=</span>axes.ravel().tolist(), shrink<span class="op">=</span><span class="fl">0.6</span>, label<span class="op">=</span><span class="st">"Vegetation_disturbance_status"</span>)</span>
<span id="cb8-51"><a href="#cb8-51" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/output1.png" class="figure mx-auto d-block"></figure><p>Valores del producto <code>VEG-DIST-STATUS</code>:</p>
<ul><li>
<strong>0:</strong> Sin alteración</li>
<li>
<strong>1:</strong> Primera detección de alteraciones con cambios en
la cobertura vegetal &lt;50%</li>
<li>
<strong>2:</strong> Detección provisional de alteraciones con
cambios en la cobertura vegetal &lt;50%</li>
<li>
<strong>3:</strong> Detección confirmada de alteraciones con cambios
en la cobertura vegetal &lt; 50%</li>
<li>
<strong>4:</strong> Primera detección de alteraciones con cambios en
la cobertura vegetal ≥50%</li>
<li>
<strong>5:</strong> Detección provisional de alteraciones con
cambios en la cobertura vegetal ≥50%</li>
<li>
<strong>6:</strong> Detección confirmada de alteraciones con cambios
en la cobertura vegetal ≥50%</li>
<li>
<strong>7:</strong> Detección finalizada de alteraciones con cambios
en la cobertura vegetal &lt;50%</li>
<li>
<strong>8:</strong> Detección finalizada de alteraciones con cambios
en lacobertura vegetal ≥50%</li>
<li>
<strong>255</strong> Datos faltantes</li>
</ul><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#Graficar la distribución de los valores de disturbios en dos subproductos DIST-VEG-</span><span class="al">ALERT</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="im">import</span> rioxarray</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co"># URLs de los dos productos</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>urls <span class="op">=</span> [</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    (<span class="st">"26/06/2023"</span>, <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230626T133151Z_20231221T083621Z_S2A_30_v1_VEG-DIST-STATUS.tif"</span>),</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>    (<span class="st">"18/09/2023"</span>, <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1_VEG-DIST-STATUS.tif"</span>)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>]</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co"># Leer y calcular frecuencias primero</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>frecuencias <span class="op">=</span> []</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="cf">for</span> label, url <span class="kw">in</span> urls:</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    da <span class="op">=</span> rioxarray.open_rasterio(url, masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>    aoi_proj <span class="op">=</span> AOI.to_crs(da.rio.crs)</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>    da_clip <span class="op">=</span> da.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    vals <span class="op">=</span> da_clip.values.flatten()</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>    vals <span class="op">=</span> vals[(vals <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">&amp;</span> (<span class="op">~</span>np.isnan(vals))]</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>    hist, _ <span class="op">=</span> np.histogram(vals, bins<span class="op">=</span>np.arange(<span class="fl">0.5</span>, <span class="fl">9.5</span>, <span class="dv">1</span>))</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    frecuencias.append((label, hist))</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="co"># Encontrar el máximo para escalar ambos plots</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>ymax <span class="op">=</span> <span class="bu">max</span>(hist.<span class="bu">max</span>() <span class="cf">for</span> _, hist <span class="kw">in</span> frecuencias)</span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="co"># Gráfico</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">4</span>), constrained_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a><span class="cf">for</span> ax, (label, hist) <span class="kw">in</span> <span class="bu">zip</span>(axes, frecuencias):</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a>    ax.bar(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">9</span>), hist, color<span class="op">=</span><span class="st">'crimson'</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a>    ax.set_xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">9</span>))</span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a>    ax.set_ylim(<span class="dv">0</span>, ymax <span class="op">+</span> ymax <span class="op">*</span> <span class="fl">0.1</span>)</span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a>    ax.set_title(<span class="ss">f"Histograma - </span><span class="sc">{</span>label<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Clase de disturbio"</span>)</span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"Frecuencia"</span>)</span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a>plt.suptitle(<span class="st">"Distribución de clases de disturbio detectadas"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/output2.png" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="evolución-del-disturbio-a-lo-largo-del-tiempo">EVOLUCIÓN DEL DISTURBIO A LO LARGO DEL TIEMPO<a class="anchor" aria-label="anchor" href="#evoluci%C3%B3n-del-disturbio-a-lo-largo-del-tiempo"></a></h3>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Stack de los 12 subproductos VEG-DIST-STATUS</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="im">from</span> rioxarray <span class="im">import</span> open_rasterio</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># Recortar cada raster al AOI y luego apilar</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>raster_list <span class="op">=</span> []</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>fechas <span class="op">=</span> []</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="cf">for</span> f <span class="kw">in</span> filtrados:    </span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    da <span class="op">=</span> open_rasterio(f[<span class="st">"url"</span>], masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>    aoi_proj <span class="op">=</span> AOI.to_crs(da.rio.crs)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>    da_clip <span class="op">=</span> da.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>    </span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    raster_list.append(da_clip)</span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>    fechas.append(pd.Timestamp(f[<span class="st">"fecha"</span>]))</span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co"># Crear el stack recortado</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>stack <span class="op">=</span> xr.concat(raster_list, dim<span class="op">=</span><span class="st">"time"</span>)</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>stack[<span class="st">"time"</span>] <span class="op">=</span> fechas</span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>stack</span></code></pre>
</div>
<p>xarray.DataArraytime: 12y: 738x: 741 array([[[nan, nan, nan, …, 0.,
0., nan], [nan, nan, nan, …, 2., 0., nan], [ 0., 0., 0., …, 0., 1.,
nan], …, [nan, nan, 0., …, 0., 0., 0.], [nan, nan, 0., …, 0., 0., 0.],
[nan, nan, 0., …, 0., 0., 0.]],</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>   <span class="ex">[[nan,</span> nan, nan, ...,  1.,  0., nan],</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="ex">[nan,</span> nan, nan, ...,  2.,  1., nan],</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="bu">[</span> 0.,  0.,  0., <span class="er">...,</span>  <span class="ex">0.,</span>  2., nan],</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="ex">...,</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  0., ...,  0.,  0.,  0.],</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  0., ...,  0.,  0.,  0.],</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  0., ...,  0.,  0.,  0.]],</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="ex">...,</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    </span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  1., ...,  0.,  0.,  0.],</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  0., ...,  0.,  0.,  0.],</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>    <span class="ex">[nan,</span> nan,  0., ...,  0.,  0.,  0.]]], dtype=float32<span class="er">)</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>    </span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>    </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#Graficar el area disturbada acumulada en el area de estudio</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#ordenaar el stack por fecha</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>stack_sorted <span class="op">=</span> stack.sortby(<span class="st">"time"</span>)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co"># Crear máscara booleana donde el valor sea 6 (disturbio confirmado)</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>disturbios <span class="op">=</span> stack_sorted <span class="op">==</span> <span class="dv">6</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co"># Sumar la cantidad de píxeles por fecha</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>pixeles_por_fecha <span class="op">=</span> disturbios.<span class="bu">sum</span>(dim<span class="op">=</span>[<span class="st">"x"</span>, <span class="st">"y"</span>])</span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co"># Convertir a km² (cada píxel es de 30m x 30m = 900 m² = 0.0009 km²)</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>km2_por_fecha <span class="op">=</span> pixeles_por_fecha <span class="op">*</span> <span class="fl">0.0009</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co"># Graficar</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>km2_por_fecha.to_series().plot(marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>plt.title(<span class="st">"Evolución de disturbios confirmados (valor 6)"</span>)</span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>plt.ylabel(<span class="st">"Área acumulada (km²)"</span>)</span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>plt.xlabel(<span class="st">"Fecha"</span>)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/output3.png" class="figure mx-auto d-block"></figure><div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Aviso</span>
<div class="callout-inner">
<div class="callout-content">
<p><strong>¿Hay algo raro en los gráficos?</strong></p>
<p>Tal vez notes que una fecha tiene dos puntos. Eso es porque el
producto OPERA usa imágenes SENTINEL y LANDSAT, y puede ocurrir que en
alguna fecha haya dos productos. En ese caso, es necesario seleccionar
alguno de ellos en base a algún criterio. Debajo, seleccionamos la
imagen con menos nubes y, de esa forma, cuando volvemos a ejecutar el
código que genera el gráfico encontramos solo un producto por fecha.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co"># Convertir a DataFrame </span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>df_filtrados <span class="op">=</span> pd.DataFrame(filtrados)</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>df_filtrados[<span class="st">"fecha"</span>] <span class="op">=</span> pd.to_datetime(df_filtrados[<span class="st">"fecha"</span>])</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co"># Ordenar por menor cobertura de nubes </span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>df_filtrados <span class="op">=</span> df_filtrados.sort_values(<span class="st">"nubes"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#Seleccionar el producto con Sentinel</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co"># Eliminar duplicados dejando el que tiene menor nubosidad</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>df_filtrados <span class="op">=</span> df_filtrados.drop_duplicates(subset<span class="op">=</span><span class="st">"fecha"</span>, keep<span class="op">=</span><span class="st">"first"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co"># Reconstruir la lista filtrada</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>filtrados_unicos <span class="op">=</span> df_filtrados.to_dict(orient<span class="op">=</span><span class="st">"records"</span>)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="co">#VOLVEMOS A CORRER EL STACK USANDO filtrados_unicos</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="co"># Stack de los subproductos VEG-DIST-STATUS</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="im">from</span> rioxarray <span class="im">import</span> open_rasterio</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="im">import</span> xarray <span class="im">as</span> xr</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="co"># Recortar cada raster al AOI y luego apilar</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a>raster_list <span class="op">=</span> []</span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a>fechas <span class="op">=</span> []</span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="cf">for</span> f <span class="kw">in</span> filtrados_unicos: </span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a>    da <span class="op">=</span> open_rasterio(f[<span class="st">"url"</span>], masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a>    aoi_proj <span class="op">=</span> AOI.to_crs(da.rio.crs)</span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a>    da_clip <span class="op">=</span> da.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a>    </span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a>    raster_list.append(da_clip)</span>
<span id="cb13-35"><a href="#cb13-35" tabindex="-1"></a>    fechas.append(pd.Timestamp(f[<span class="st">"fecha"</span>]))</span>
<span id="cb13-36"><a href="#cb13-36" tabindex="-1"></a></span>
<span id="cb13-37"><a href="#cb13-37" tabindex="-1"></a><span class="co"># Crear el stack recortado</span></span>
<span id="cb13-38"><a href="#cb13-38" tabindex="-1"></a>stack <span class="op">=</span> xr.concat(raster_list, dim<span class="op">=</span><span class="st">"time"</span>)</span>
<span id="cb13-39"><a href="#cb13-39" tabindex="-1"></a>stack[<span class="st">"time"</span>] <span class="op">=</span> fechas</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="generar-un-mapa-de-distubios">GENERAR UN MAPA DE DISTUBIOS<a class="anchor" aria-label="anchor" href="#generar-un-mapa-de-distubios"></a></h3>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="im">import</span> hvplot.xarray</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="im">import</span> geoviews <span class="im">as</span> gv</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co"># Enmascarar valores 0 para que sean transparentes</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>stack_masked <span class="op">=</span> stack.where(stack <span class="op">!=</span> <span class="dv">0</span>)</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co"># Submuestreo para que no sea tan pesado</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>stack_sub <span class="op">=</span> stack_masked.isel(x<span class="op">=</span><span class="bu">slice</span>(<span class="dv">0</span>, <span class="va">None</span>, <span class="dv">4</span>), y<span class="op">=</span><span class="bu">slice</span>(<span class="dv">0</span>, <span class="va">None</span>, <span class="dv">4</span>))</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co"># Colormap rojo fuerte</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>cmap <span class="op">=</span> [<span class="st">"#fff5f5"</span>, <span class="st">"#fcbfbf"</span>, <span class="st">"#f78787"</span>, <span class="st">"#f25454"</span>, <span class="st">"#e93232"</span>, <span class="st">"#d40000"</span>, <span class="st">"#a50000"</span>, <span class="st">"#730000"</span>]</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co"># Visualización interactiva</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>hvplot_map <span class="op">=</span> stack_sub.hvplot(</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'x'</span>,</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'y'</span>,</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>    groupby<span class="op">=</span><span class="st">'time'</span>,</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>    cmap<span class="op">=</span>cmap,</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>    clim<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>    rasterize<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>    crs<span class="op">=</span>stack.rio.crs,</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>    tiles<span class="op">=</span>gv.tile_sources.EsriImagery,</span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.9</span>,</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>    frame_width<span class="op">=</span><span class="dv">500</span>,    </span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>    frame_height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Evolución de disturbios detectados"</span>,</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>    widget_location<span class="op">=</span><span class="st">'bottom'</span>,   <span class="co"># Deslizador de tiempo abajo</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>    colorbar<span class="op">=</span><span class="va">True</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>)</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>hvplot_map</span></code></pre>
</div>
<figure><img src="../fig/output4.png" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="explorar-subproducto-veg_dist-date">EXPLORAR SUBPRODUCTO VEG_DIST-DATE<a class="anchor" aria-label="anchor" href="#explorar-subproducto-veg_dist-date"></a></h3>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="im">from</span> pystac_client <span class="im">import</span> Client</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co"># Abrir el catálogo STAC de LP DAAC</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>catalog <span class="op">=</span> Client.<span class="bu">open</span>(<span class="st">"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co"># Parámetros de búsqueda</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>search_params <span class="op">=</span> {</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>    <span class="st">"bbox"</span>: [<span class="op">-</span><span class="fl">46.78</span>, <span class="op">-</span><span class="fl">4.61</span>, <span class="op">-</span><span class="fl">46.58</span>, <span class="op">-</span><span class="fl">4.41</span>],  <span class="co"># AOI</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>    <span class="st">"datetime"</span>: <span class="st">"2025-01-01/2025-07-26"</span>,     <span class="co"># rango de fechas</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>    <span class="st">"collections"</span>: [<span class="st">"OPERA_L3_DIST-ALERT-HLS_V1_1"</span>]</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>}</span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="co"># Buscar items en el catálogo</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a>items <span class="op">=</span> <span class="bu">list</span>(catalog.search(<span class="op">**</span>search_params).get_items())</span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="co"># Filtrar solo los assets VEG-DIST-DATE accesibles por HTTPS</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a>filtrado_date <span class="op">=</span> []</span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a>    <span class="cf">for</span> asset_key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">"VEG-DIST-DATE"</span> <span class="kw">in</span> asset_key <span class="kw">and</span> asset.href.startswith(<span class="st">"https"</span>):</span>
<span id="cb15-24"><a href="#cb15-24" tabindex="-1"></a>            filtrado_date.append({</span>
<span id="cb15-25"><a href="#cb15-25" tabindex="-1"></a>                <span class="st">"start_datetime"</span>: item.properties.get(<span class="st">"start_datetime"</span>),</span>
<span id="cb15-26"><a href="#cb15-26" tabindex="-1"></a>                <span class="st">"end_datetime"</span>: item.properties.get(<span class="st">"end_datetime"</span>),</span>
<span id="cb15-27"><a href="#cb15-27" tabindex="-1"></a>                <span class="st">"datetime"</span>: item.datetime,</span>
<span id="cb15-28"><a href="#cb15-28" tabindex="-1"></a>                <span class="st">"cloud_cover"</span>: item.properties.get(<span class="st">"eo:cloud_cover"</span>),</span>
<span id="cb15-29"><a href="#cb15-29" tabindex="-1"></a>                <span class="st">"url"</span>: asset.href</span>
<span id="cb15-30"><a href="#cb15-30" tabindex="-1"></a>            })</span>
<span id="cb15-31"><a href="#cb15-31" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" tabindex="-1"></a><span class="co"># Convertir a DataFrame para explorar</span></span>
<span id="cb15-33"><a href="#cb15-33" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(filtrado_date)</span>
<span id="cb15-34"><a href="#cb15-34" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" tabindex="-1"></a><span class="co"># Mostrar resumen</span></span>
<span id="cb15-36"><a href="#cb15-36" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Se encontraron </span><span class="sc">{</span><span class="bu">len</span>(df)<span class="sc">}</span><span class="ss"> assets únicos con VEG-DIST-DATE vía HTTPS."</span>)</span>
<span id="cb15-37"><a href="#cb15-37" tabindex="-1"></a>df.head()</span></code></pre>
</div>
<p>Se encontraron 226 assets únicos con VEG-DIST-DATE vía HTTPS.</p>
<div class="line-block">| start_datetime | end_datetime | datetime |
cloud_cover | url</div>
<p>0 | 2025-01-01T13:33:27.790Z | 2025-01-01T13:33:27.790Z | 2025-01-01
13:33:27.790000+00:00 | 88 | <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>… 1 |
2025-01-01T13:33:30.822Z | 2025-01-01T13:33:30.822Z | 2025-01-01
13:33:30.822000+00:00 | 83 | <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>… 2 |
2025-01-01T13:33:42.170Z | 2025-01-01T13:33:42.170Z | 2025-01-01
13:33:42.170000+00:00 | 92 | <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>… 3 |
2025-01-01T13:33:45.292Z | 2025-01-01T13:33:45.292Z | 2025-01-01
13:33:45.292000+00:00 | 88 | <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>… 4 |
2025-01-02T13:17:23.274Z | 2025-01-02T13:17:47.190Z | 2025-01-02
13:17:23.274000+00:00 | 83 | <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>..</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>df[<span class="st">"cloud_cover"</span>] <span class="op">=</span> pd.to_numeric(df[<span class="st">"cloud_cover"</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>df.plot(</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>   <span class="co">#x="datetime", </span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"cloud_cover"</span>, </span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"bar"</span>, </span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>), </span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"skyblue"</span>, </span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Cobertura de nubes por escena"</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co"># Ocultar etiquetas del eje X</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>plt.xticks([])</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/output5.png" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>df_bajanubosidad <span class="op">=</span> df[df[<span class="st">"cloud_cover"</span>] <span class="op">&lt;</span> <span class="dv">20</span>]</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>df_bajanubosidad.plot(</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>   <span class="co">#x="datetime", </span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"cloud_cover"</span>, </span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"bar"</span>, </span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>), </span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"skyblue"</span>, </span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Cobertura de nubes por fecha"</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>)</span></code></pre>
</div>
<p>&lt;Axes: title={‘center’: ‘Cobertura de nubes por fecha’}&gt;</p>
<figure><img src="../fig/output7.png" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co"># Asegurarse de que la columna de fechas esté como datetime</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>df_bajanubosidad[<span class="st">"end_datetime"</span>] <span class="op">=</span> pd.to_datetime(df_bajanubosidad[<span class="st">"end_datetime"</span>])</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co"># Ordenar por fecha final y seleccionar el más reciente</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>más_reciente_baja_nubosidad <span class="op">=</span> df_bajanubosidad.sort_values(<span class="st">"end_datetime"</span>, ascending<span class="op">=</span><span class="va">False</span>).iloc[<span class="dv">0</span>]</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co"># Mostrar resultado</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Producto más reciente con menos de 20</span><span class="sc">% d</span><span class="st">e nubosidad:"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="bu">print</span>(más_reciente_baja_nubosidad)</span></code></pre>
</div>
<p>Producto más reciente con menos de 20% de nubosidad: start_datetime
2025-07-17T13:34:04.242Z end_datetime 2025-07-17 13:34:04.242000+00:00
datetime 2025-07-17 13:34:04.242000+00:00 cloud_cover 0 url <a href="https://data.lpdaac.earthdatacloud.nasa.gov/lp" class="external-link uri">https://data.lpdaac.earthdatacloud.nasa.gov/lp</a>… Name:
218, dtype: object</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#seleccionamos la url del producto mas reciente con nubosidad &lt; 20%</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>url<span class="op">=</span>más_reciente_baja_nubosidad[<span class="st">"url"</span>]</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#Visualizar el subproducto VEG_DIST_DATE en comparación con el subproducto VEG_DIST_STATE</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="im">import</span> rioxarray</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> box</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co"># AOI</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>aoi_geom <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>[box(<span class="op">-</span><span class="fl">46.78</span>, <span class="op">-</span><span class="fl">4.61</span>, <span class="op">-</span><span class="fl">46.58</span>, <span class="op">-</span><span class="fl">4.41</span>)], crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co"># Subproducto VEG_DIST_DATE</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a>url1 <span class="op">=</span> más_reciente_baja_nubosidad[<span class="st">"url"</span>]</span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a>da1 <span class="op">=</span> rioxarray.open_rasterio(url1, masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a>aoi_proj <span class="op">=</span> aoi_geom.to_crs(da1.rio.crs)</span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a>da1_clip <span class="op">=</span> da1.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a>masked1 <span class="op">=</span> np.ma.masked_where(da1_clip <span class="op">&lt;=</span> <span class="dv">0</span>, da1_clip)</span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="co"># Subproducto VEG_DIST_STATUS</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a>url2<span class="op">=</span> <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/OPERA_L3_DIST-ALERT-HLS_V1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1/OPERA_L3_DIST-ALERT-HLS_T23MLR_20230918T131723Z_20231221T085043Z_L8_30_v1_VEG-DIST-STATUS.tif"</span></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a>da2 <span class="op">=</span> rioxarray.open_rasterio(url2, masked<span class="op">=</span><span class="va">True</span>).squeeze()</span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a>da2_clip <span class="op">=</span> da2.rio.clip(aoi_proj.geometry, aoi_proj.crs)</span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a>masked2 <span class="op">=</span> np.ma.masked_where(da2_clip <span class="op">&lt;=</span> <span class="dv">0</span>, da2_clip)</span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a><span class="co"># Gráfico de los 2 subproductos</span></span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" tabindex="-1"></a><span class="co"># Mapa 1</span></span>
<span id="cb19-33"><a href="#cb19-33" tabindex="-1"></a>img1 <span class="op">=</span> axes[<span class="dv">0</span>].imshow(</span>
<span id="cb19-34"><a href="#cb19-34" tabindex="-1"></a>    masked1,</span>
<span id="cb19-35"><a href="#cb19-35" tabindex="-1"></a>    cmap<span class="op">=</span><span class="st">"viridis"</span>,</span>
<span id="cb19-36"><a href="#cb19-36" tabindex="-1"></a>    extent<span class="op">=</span>da1_clip.rio.bounds(),</span>
<span id="cb19-37"><a href="#cb19-37" tabindex="-1"></a>    interpolation<span class="op">=</span><span class="st">"nearest"</span></span>
<span id="cb19-38"><a href="#cb19-38" tabindex="-1"></a>)</span>
<span id="cb19-39"><a href="#cb19-39" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"VEG_DIST_DATE 17/07/2025"</span>)</span>
<span id="cb19-40"><a href="#cb19-40" tabindex="-1"></a>axes[<span class="dv">0</span>].set_frame_on(<span class="va">True</span>)</span>
<span id="cb19-41"><a href="#cb19-41" tabindex="-1"></a>cbar1 <span class="op">=</span> plt.colorbar(img1, ax<span class="op">=</span>axes[<span class="dv">0</span>], shrink<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb19-42"><a href="#cb19-42" tabindex="-1"></a>cbar1.set_label(<span class="st">"Día desde 2020-12-31"</span>)</span>
<span id="cb19-43"><a href="#cb19-43" tabindex="-1"></a></span>
<span id="cb19-44"><a href="#cb19-44" tabindex="-1"></a><span class="co"># colormap personalizado</span></span>
<span id="cb19-45"><a href="#cb19-45" tabindex="-1"></a>white_to_red <span class="op">=</span> mcolors.LinearSegmentedColormap.from_list(<span class="st">"white_to_red"</span>, [<span class="st">"white"</span>, <span class="st">"red"</span>])</span>
<span id="cb19-46"><a href="#cb19-46" tabindex="-1"></a><span class="co"># Mapa 2</span></span>
<span id="cb19-47"><a href="#cb19-47" tabindex="-1"></a>img2 <span class="op">=</span> axes[<span class="dv">1</span>].imshow(</span>
<span id="cb19-48"><a href="#cb19-48" tabindex="-1"></a>    masked2,</span>
<span id="cb19-49"><a href="#cb19-49" tabindex="-1"></a>    cmap<span class="op">=</span> white_to_red,</span>
<span id="cb19-50"><a href="#cb19-50" tabindex="-1"></a>    extent<span class="op">=</span>da2_clip.rio.bounds(),</span>
<span id="cb19-51"><a href="#cb19-51" tabindex="-1"></a>    interpolation<span class="op">=</span><span class="st">"nearest"</span></span>
<span id="cb19-52"><a href="#cb19-52" tabindex="-1"></a>)</span>
<span id="cb19-53"><a href="#cb19-53" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"VEG_DIST-STATUS 18/09/2023"</span>)</span>
<span id="cb19-54"><a href="#cb19-54" tabindex="-1"></a>axes[<span class="dv">1</span>].set_frame_on(<span class="va">True</span>)</span>
<span id="cb19-55"><a href="#cb19-55" tabindex="-1"></a>cbar2 <span class="op">=</span> plt.colorbar(img2, ax<span class="op">=</span>axes[<span class="dv">1</span>], shrink<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb19-56"><a href="#cb19-56" tabindex="-1"></a>cbar2.set_label(<span class="st">"Valor de disturbio"</span>)</span>
<span id="cb19-57"><a href="#cb19-57" tabindex="-1"></a></span>
<span id="cb19-58"><a href="#cb19-58" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-59"><a href="#cb19-59" tabindex="-1"></a>plt.show()</span>
<span id="cb19-60"><a href="#cb19-60" tabindex="-1"></a></span></code></pre>
</div>
<figure><img src="../fig/output8.png" class="figure mx-auto d-block"></figure><!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></div>
</div>
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Capítulo previo y siguiente"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/OPERA_products.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="../instructor/diapositivas.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/OPERA_products.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: NASA Earthdata Cloud
        </a>
        <a class="chapter-link float-end" href="../instructor/diapositivas.html" rel="next">
          Siguiente: Diapositivas...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      <footer class="row footer mx-md-3"><hr><div class="col-md-6">
    <p>Este sitio fue adaptado por <a href="https://www.metadocencia.org" target="_blank" class="external-link">MetaDocencia</a> a partir de <a href="https://carpentries.github.io/sandpaper/" target="_blank" class="external-link">Carpentries Workbench</a>.</p><p><a href="https://github.com/MetaDocencia/metadocencia-workbench-template/blob/main/README.md" class="external-link">Editar en GitHub</a> | <a href="https://github.com/MetaDocencia/metadocencia-workbench-template/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a> | <a href="https://github.com/MetaDocencia/metadocencia-workbench-template" class="external-link">Repositorio</a></p><p><a href="https://github.com/MetaDocencia/metadocencia-workbench-template/blob/main/CITATION.cff" class="external-link">Citar</a> | <a href="mailto:infraestructura@metadocencia.org">Contacto</a> | <a href="https://www.metadocencia.org/institucional/" class="external-link">Quiénes somos</a></p>
  </div>
  <div class="col-md-6">
    <p>Este material está disponible bajo licencia <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">CC-BY 4.0</a>.</p>
    <p>Sitio compilado con `sandpaper` y `varnish`.</p>
  </div>
</footer></div></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

